# IPFS
链下存储方式可采用云存储或者本地化存储，但物联网场景下产生的数据将是几十ZB，甚至上百ZB，如此海量的数据和数据并发传递量，对于传统的数据库的性能上提出了挑战。基于区块链开发的分布式数据库通过拓扑结构的转变和寻址系统的改造，有效的解决了以上问题。

数据传输网络的拓扑结构转变

传统的数据传输网络的拓扑结构是星状网络，在此拓朴中各节点都连接到一个中枢设备，通常这个中枢设备是中央服务器。星状网络下的数据传输模式，从系统弹性、可维护性和安全性看，它有三个缺点：

第一，	中央服务器易遭受攻击，出现单节点故障；

第二，	中央服务器存储和分发PB级别的数据，宽带和存储空间面临巨大压力；

第三，		中央服务中的数据隐私缺乏保护，易被滥用。

在数据传输网络拓扑结构，由星状网络转变为P2P的超媒体传输协议后，从系统弹性、可维护性和数据安全性上有三个优势：

1）	网络结构更稳定，可避免单节点故障；

2）	点对点的数据传输效率更高，节省了带宽和数据处理资源；

3）	数据隐私性可得到保证。

未来随着数据量急速增长，在并发需求越来越大；在系统架构层面，集中式数据库需要解决两个问题：
  
  当单一Web服务无法支撑大量Client访问，此时就需要由多台Web服务器组成的负载集群系统；
	
  需要解决的另一个问题是带宽阻塞，带宽BW=PS*PC*8bit/byte，PS为页面平均大小，PC为并发数，8bit/byte是单位转换，1byte=8bit。当并发数提高时，带宽要求也提高，在集中式网络下，极易造成网络堵塞。

因此，在数据传输结构为星状网络下，随着边缘节点增加，中央服务器性能和带宽都会面临压力；但是在分布式存储中，数据以P2P形式传输，传输节点之间直接连接，可避免高并发及单节点故障问题；随着节点增加，反而会降低存储成本，提高传输效率。
在数据量传输需求巨大的背景下，需要对底层的数据传输模式做出革新，P2P模式有效缓解了存储传输压力。
同时，区块链存储也加入了一些其它技术要素，降低数据冗余，避免存储资源浪费。如Storj和Sia引入纠删码技术，在数据传输过程中，通过纠删码能以更小的数据冗余来提高存储可靠性；IPFS则引入DHT标识技术和Markle DAG技术，完全相同内容只存储一次，降低数据冗余。

路由层寻址系统

基于P2P模式的的网络结构，可以构造出哈希的寻址方式，基于内容寻址。这类寻址方式可以克服IP寻址中的链接失效、内容删除问题，保证了数据存储的安全性；另外，借助于Git技术，实现了数据库的可扩展性。

1）集中式数据库IP寻址

集中式数据库的寻址方式为地址寻址，通过URL(统一资源定位符)确定内容的位置，URL的完整格式如下：
协议类型:[//[访问资源需要的凭证信息@]服务器地址[:端口号]][/资源层级UNIX文件路径]文件名[?查询][#片段ID]。具体寻址方式如下：
	
  首先，用URL来登录网站，浏览器并不能识别URL是什么，因此从输入URL开始，浏览器就要做域名解析，也就是IP寻址的工作浏览器会解析URL对应的IP地址。网站就是靠IP来定位的。
	
  目标URL查找到对应的IP地址之后，通过IP地址查找到对应的服务器，然后就可以链接到该IP地址下的服务器下载内容。

通过IP寻址比较常见的现象是，页面已经被删除或链接地址改动，URL链接失效，导致信息丢失。

2）分布式数据库内容寻址

分布式数据库基于内容寻址的方式。实现了
	
  防止链接崩溃：所有内容由多重哈希校验并唯一标识，从IP寻址切换到内容寻址，可防止链接失效，数据可得到永久保存；
	
  防止篡改：因为内容不能在不改变地址的情况下做出改变，由于所有内容都通过哈希验证，如果数据被篡改或损坏，都会在IPFS网络中会监测到；
  
  历史版本回溯功能，数据库更易维护：Git存储文件时，会把文件分成若干份，并计算各部分的哈希值；利用这些构建起与文件对应的有向无环图，DAG的根节点也就是该文件的哈希了。若需要修改文件，只需要修改部分节点。

内容寻址的原理是基于路由层的DHT技术、对象层的Markle DAG技术和文件层的Git技术。














